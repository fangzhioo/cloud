(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{Urcz:function(e,t,n){"use strict";n.r(t);n("oeA4");var a=n("MS9U"),r=(n("4JJ1"),n("XOGu")),c=n("ZZRV"),i=n.n(c),o=n("fXbq"),u=n("PQ3o"),l=n("Qko3"),s=[{type:"paragraph",children:[{text:"A line of text in a paragraph."}]}],f=function(){var e=Object(c["useMemo"])((function(){return Object(l["c"])(Object(u["h"])())}),[]),t=Object(c["useState"])(s),n=Object(o["a"])(t,2),a=n[0],r=n[1],f=function(e){console.log(e),r(e)};return i.a.createElement(l["b"],{editor:e,value:a,onChange:f},i.a.createElement(l["a"],{onKeyDown:function(t){"&"===t.key&&(t.preventDefault(),e.insertText("and"))}}))},p=f,h=(n("XxEX"),n("VVRn")),v=n("RqRT"),d=n("XGJZ"),b=n("+fD2"),m=n.n(b),O=(n("z0lO"),n("UkX0")),g=n("gKBb"),w=n("XYMm"),j=n("MjEU"),y=n("Bk2R"),x=n("Rtfb"),E=n("Yx6r"),k=n("sy1d");function R(){return S.apply(this,arguments)}function S(){return S=Object(w["a"])(m.a.mark((function e(){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(k["a"])("/api/aliyun/antdPolicy"));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}var U=function(e){Object(x["a"])(n,e);var t=Object(E["a"])(n);function n(){var e;Object(j["a"])(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.state={config:{}},e.init=Object(w["a"])(m.a.mark((function t(){var n;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R();case 3:n=t.sent,1e4===n.code?e.setState({config:Object(g["a"])({},n.data)}):O["a"].error(n.msg),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),O["a"].error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.onChange=function(t){var n=t.fileList,a=e.props.onChange;a&&a(Object(d["a"])(n))},e.onRemove=function(t){var n=e.props,a=n.value,r=n.onChange;if(void 0!==a){var c=a.filter((function(e){return e.url!==t.url}));r&&r(c)}},e.transformFile=function(t){var n=e.state.config,a=t.name.slice(t.name.lastIndexOf(".")),r=Date.now()+a;return t.url=n.dir+r,t},e.getExtraData=function(t){var n=e.state.config;return{key:t.url,OSSAccessKeyId:n.accessId,policy:n.policy,Signature:n.signature}},e.beforeUpload=Object(w["a"])(m.a.mark((function t(){var n;return m.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state.config.expire,!(n<Date.now())){t.next=4;break}return t.next=4,e.init();case 4:return t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)}))),e}return Object(y["a"])(n,[{key:"componentDidMount",value:function(){var e=Object(w["a"])(m.a.mark((function e(){return m.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this.props,t=e.value,n=Object(v["a"])(e,["value"]),a=this.state.config,r=a.host;if(void 0===r||null===r||""===r)return"policy config error !!! host is void !!!";var c=Object(g["a"])(Object(g["a"])({},n),{},{name:"file",fileList:t,action:r,onChange:this.onChange,onRemove:this.onRemove,transformFile:this.transformFile,data:this.getExtraData,beforeUpload:this.beforeUpload});return i.a.createElement(h["a"],c)}}]),n}(i.a.Component),D=U,C=n("UfvS"),X=function(){return i.a.createElement(a["a"],{bordered:!1},i.a.createElement("h1",null,"editor"),i.a.createElement("div",null,i.a.createElement(r["a"],null,"slate-react rich editor"),i.a.createElement(a["a"],null,i.a.createElement(p,null)),i.a.createElement(r["a"],null,"AliyunOSSUpload"),i.a.createElement(D,{listType:"picture-card"},i.a.createElement(C["a"],null))))};t["default"]=X}}]);